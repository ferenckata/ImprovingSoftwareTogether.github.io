<!DOCTYPE html>
<html class="no-js" lang="en">
<head>

    <!--- basic page needs
    ================================================== -->
    <meta charset="utf-8">
    <title>Dependency management</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- mobile specific metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS
    ================================================== -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/vendor.css">
    <link rel="stylesheet" href="css/main.css">

    <!-- script
    ================================================== -->
    <script src="js/modernizr.js"></script>

</head>

<body class="ss-bg-white">

    <!-- preloader
    ================================================== -->
    <div id="preloader">
        <div id="loader" class="dots-fade">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>

    <div id="top" class="s-wrap site-wrapper">

        <!-- site header
        ================================================== -->
        <header class="s-header header">

            <div class="header__top">
                <div class="header__logo">
                    <a class="site-logo" href="index.html">
                        <img src="images/logo.svg" alt="Homepage">
                    </a>
                </div>
            </div> <!-- end header__top -->

            <nav class="header__nav-wrap">

                <ul class="header__nav">
                    <li><a href="index.html" title="">Home</a></li>
                    <li class="has-children">
                        <a href="page-about.html" title="">Categories</a>
                        <ul class="sub-menu">
                        <li><a href="category_literature.html">Literature</a></li>
                        <li><a href="category_examples.html">Examples</a></li>
                        <li><a href="category_experience.html">Experience</a></li>
                        </ul>
                    </li>
                    <li><a href="page-about.html" title="">About</a></li>
                    <li><a href="page-contact.html" title="">Contact</a></li>
                </ul> <!-- end header__nav -->

            </nav> <!-- end header__nav-wrap -->

            <!-- menu toggle -->
            <a href="#0" class="header__menu-toggle">
                <span>Menu</span>
            </a>

        </header> <!-- end s-header -->

        <!-- search
        ================================================== -->
        <div class="s-search">

            <div class="search-block">
    
                <form role="search" method="get" class="search-form" action="#">
                    <label>
                        <span class="hide-content">Search for:</span>
                        <input type="search" class="search-field" placeholder="Type Keywords" value="" name="s" title="Search for:" autocomplete="off">
                    </label>
                    <input type="submit" class="search-submit" value="Search">
                </form>
    
                <a href="#0" title="Close Search" class="search-close">Close</a>
    
            </div>  <!-- end search-block -->

            <!-- search modal trigger -->
            <a href="#0" class="search-trigger">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill:rgba(0, 0, 0, 1);transform:;-ms-filter:"><path d="M10,18c1.846,0,3.543-0.635,4.897-1.688l4.396,4.396l1.414-1.414l-4.396-4.396C17.365,13.543,18,11.846,18,10 c0-4.411-3.589-8-8-8s-8,3.589-8,8S5.589,18,10,18z M10,4c3.309,0,6,2.691,6,6s-2.691,6-6,6s-6-2.691-6-6S6.691,4,10,4z"></path></svg>
                <span>Search</span>
            </a>
            <span class="search-line"></span>

        </div> <!-- end s-search -->


        <!-- site content
        ================================================== -->
        <div class="s-content content">
            <main class="row content__page">
                
                <article class="column large-full entry format-standard">

                    <div class="media-wrap entry__media">
                        <div class="entry__post-thumb">
                            <!-- <img src="images/thumbs/single/standard/standard-1000.jpg" srcset="images/thumbs/single/standard/standard-2000.jpg 2000w, images/thumbs/single/standard/standard-1000.jpg 1000w, images/thumbs/single/standard/standard-500.jpg 500w" sizes="(max-width: 2000px) 100vw, 2000px" alt=""> -->
                        </div>
                    </div>

                    <div class="content__page-header entry__header">
                        <h1 class="display-1 entry__title">
                        Dependency management
                        </h1>
                        <ul class="entry__header-meta">
                            <li class="author">By <a href="page-about.html">NCMM SQ team</a></li>
                            <li class="date">August 7, 2024</li>
                            <li class="cat-links">
                                <a href="category_examples.html">Examples</a>
                                <a href="category_experience.html">Experience</a>
                            </li>
                        </ul>
                    </div>
                    <!-- end entry__header -->

                    <div class="entry__content">

                        <p class="lead drop-cap">
                            A fundamental aspect of bioinformatics software development involves integrating functionalities from various software packages, which refer to collections of code that perform specific tasks. Given the large number of dependencies and the entire ecosystem of tools involved in scientific software development, managing these dependencies is crucial for ensuring the reproducibility of findings.
                        </p>
                        <p>
                            In a team setting, it is natural to create identical environments for all developers to ensure they can run the code identically. In the software quality seminars related to dependency management, we covered the following topics: container solutions (<a href="https://docs.docker.com/">Docker</a>, <a href="https://apptainer.org/">Apptainer/</a>), R package development, and <a href="https://www.anaconda.com/">Anaconda</a>. We established a <a href="https://hub.docker.com/">DockerHub</a> account for our group to publish our custom containers. This resource enables, for example, easy installation of our Snakemake pipelines across different servers.
                        </p>
                        <p>
                            There are two angles of dependency management, which we give examples of here. First, we share a previous and current version of code where the placement of the package imports is improved. This code can also be seen as an example of modularization, with rearranging the linear script to set up and functions. Furthermore, we improved the documentation and usability by using named arguments instead of positional ones.
                        </p>

                        <p>
                            <figure>
                                <img src="images/SQpaper_figures_dependency_before.png" srcset="images/SQpaper_figures_dependency_before.png 3500w, images/SQpaper_figures_dependency_before.png 1000w, images/SQpaper_figures_dependency_before.png 500w" sizes="(max-width: 4000px) 100vw, 2000px" alt="code_previous">
                                <figcaption><b>Figure 1. An example for dependency management within the code: PREVIOUS.</b></figcaption>
                            </figure>

                            <figure>
                                <img src="images/SQpaper_figures_dependency_after.png" srcset="images/SQpaper_figures_dependency_after.png 3500w, images/SQpaper_figures_dependency_after.png 1000w, images/SQpaper_figures_dependency_after.png 500w" sizes="(max-width: 4000px) 100vw, 2000px" alt="code_after">
                                <figcaption><b>Figure 2. An example for dependency management within the code: CURRENT.</b></figcaption>
                            </figure>
                        </p>
                        
                        <p>
                            Second, we share an example of documenting the requirements where the responsibility of installing the software is moved from the user to the developer. README-based solution: the user must install the dependencies, and version and source might be given, but compatibility following updates is not ensured.
                        </p>

<pre><code class="language-">
    ## Installation

    - R (version >= 3.6.1)
    - CAGEr (version >= 2.6.1)
        ## for installation follow the instructions here
        ## [https://bioconductor.org/packages/release/bioc/vignettes/CAGEr/inst/doc/CAGEexp.html#normalization]
    - BSgenome.Hsapiens.UCSC.hg38
    - tidyr
    - viridis
    - ggplot2
</code></pre>

                            <p>
                                Container-based solution: the user can either use the publicly available container that includes a snapshot of all necessary requirements, or build their own environment.
                            </p>

<pre><code class="language-">
    ## Installation

    Container available at https://hub.docker.com/r/cbgr/cager261
    For details, refer to requirements.R
</code></pre>

                            <p>
                                The content of <code>requirements.R</code> is shown below.
                            </p>

<pre><code class="language-">
    ## Container folder structure
    .libPaths( c( "/opt/software" , .libPaths() ) )

    ## CRAN packages:
    packages_cran = c(
        "optparse",     	## Read in data
        "tidyr",            ## Data formatting and manipulation
        "ggplot2",       	## Plotting
        [...])
    message(
        "; Installing these R packages from CRAN repository:",
        packages_cran)
    install.packages(
        packages_cran,
        repos="https://cran.uib.no/",
        lib="/opt/software")
    
    ## Bioconductor packages:
    packages_bioconductor <- c("BSgenome.Hsapiens.UCSC.hg38")
    message(
        "; Installing these R Bioconductor packages: ",
        packages_bioconductor)
    BiocManager::install(
        packages_bioconductor,
        lib="/opt/software")
</code></pre>

                            <p>
                                The content of the <code>Dockerfile</code> is shown below.
                            </p>

<pre><code class="language-">
    # Docker install R 4.3, Bioconductor 3.17
    FROM bioconductor/bioconductor_docker:3.17
    
    # Set up folder structure
    WORKDIR /opt/software
    
    # Install CAGEr 2.6.1
    RUN R -e 'BiocManager::install("CAGEr")'
    
    # Install other R dependencies
    COPY requirements.R /opt/software/requirements.R
    RUN Rscript requirements.R
    ENV R_LIBS=${R_LIBS}:/opt/software
</code></pre>


                        <p class="entry__tags">
                            <span>Post Tags</span>
        
                            <span class="entry__tag-list">
                                <a href="#0">literature</a>
                                <a href="#0">bioinformatics</a>
                                <a href="#0">examples</a>
                            </span>
            
                        </p>
                    </div>
                    <!-- end entry content -->

                </article> <!-- end column large-full entry-->

            </main>

        </div> <!-- end s-content -->


        <!-- footer
        ================================================== -->
        <footer class="s-footer footer">
            <div class="row">
                <div class="column large-full footer__content">
                    <div class="footer__copyright">
                        <span>Â© Copyright Typerite 2021</span> 
                        <span>Design by <a href="https://www.styleshout.com/">StyleShout</a></span>
                    </div>
                </div>
            </div>

            <div class="go-top">
                <a class="smoothscroll" title="Back to Top" href="#top"></a>
            </div>
        </footer>

    </div> <!-- end s-wrap -->

    <!-- Java Script
    ================================================== -->
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>

</body>
